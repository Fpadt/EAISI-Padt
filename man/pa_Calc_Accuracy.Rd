% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/evaluation_ext.R
\name{pa_Calc_Accuracy}
\alias{pa_Calc_Accuracy}
\title{Calculate Forecast Accuracy Metrics}
\usage{
pa_Calc_Accuracy(.tab, .act_ftype = 1, .fct_ftype = 2)
}
\arguments{
\item{.tab}{A `data.table` containing the input data with at least the columns:
`VTYPE`, `FTYPE`, `SALESORG`, `PLANT`, `MATERIAL`, `CALMONTH`, `Q`, and optionally `STEP`.}

\item{.act_ftype}{An integer specifying the `FTYPE` value for actual data. Defaults to `1`.}

\item{.fct_ftype}{An integer specifying the `FTYPE` value for forecast data. Defaults to `2`.}
}
\value{
A `data.table` containing the merged actual (`ACT`) and forecast (`FCT`) data along with
the following derived columns:
- `E`: Error (`ACT - FCT`)
- `E2`: Squared Error (`E^2`)
- `AE`: Absolute Error (`abs(E)`)
- `APE`: Absolute Percentage Error (`100 * AE / ACT`)
- `APA`: Absolute Percentage Accuracy (`100 - APE`)
- `EPE`: Error Percentage Error (`100 * AE / FCT`)
- `EPA`: Error Percentage Accuracy (`100 - EPE`)
}
\description{
This function calculates forecast accuracy metrics by merging actual and forecast data,
deriving error-based metrics such as Absolute Percentage Error (APE), and returning a detailed
`data.table` with computed values.
}
\details{
The function performs the following steps:
1. Subsets the input `data.table` for actual (`ACT`) and forecast (`FCT`) data based on
   `VTYPE` and `FTYPE` values.
2. Merges the subsets using a full outer join on the keys: `SALESORG`, `PLANT`, `MATERIAL`,
   and `CALMONTH`.
3. Replaces `NA` values in the `ACT` and `FCT` columns with `0`.
4. Computes the derived columns (e.g., `E`, `AE`, `APE`) as described in the `@return` section.
}
\examples{
library(data.table)

# Sample data
.tab <- data.table(
  VTYPE = c("010", "060", "010", "060"),
  FTYPE = c(1, 2, 1, 2),
  SALESORG = c("A", "A", "B", "B"),
  PLANT = c("P1", "P1", "P2", "P2"),
  MATERIAL = c("M1", "M1", "M2", "M2"),
  CALMONTH = c("202301", "202301", "202302", "202302"),
  Q = c(100, 120, 200, 190),
  STEP = c(1, 1, 1, 1)
)

# Calculate accuracy metrics
result <- pa_Calc_Accuracy(.tab)
print(result)

}
